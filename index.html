<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>120x120 Number Grid</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  #controls {
    margin-bottom: 10px;
  }
  canvas {
    border: 1px solid #333;
    background: #fff;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="controls">
  <button onclick="zoomIn()">Zoom In</button>
  <button onclick="zoomOut()">Zoom Out</button>
  <button onclick="downloadGrid()">Download Image</button>
</div>

<canvas id="gridCanvas" width="1200" height="1200"></canvas>

<script>
const canvas = document.getElementById('gridCanvas');
const ctx = canvas.getContext('2d');

const rows = 120;
const cols = 120;
const cellSize = 10; // 10x10 pixels per cell
let scale = 1;

// Initialize grid data
const gridData = Array.from({ length: rows }, () => Array(cols).fill(null));

// Draw the grid
function drawGrid() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.save();
  ctx.scale(scale, scale);

  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const x = c * cellSize;
      const y = r * cellSize;

      // Draw cell background
      ctx.fillStyle = '#fff';
      ctx.fillRect(x, y, cellSize, cellSize);
      ctx.strokeStyle = '#ccc';
      ctx.strokeRect(x, y, cellSize, cellSize);

      // Draw number if exists
      if (gridData[r][c] !== null) {
        ctx.fillStyle = '#000';
        ctx.font = `${cellSize - 2}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(gridData[r][c], x + cellSize / 2, y + cellSize / 2);
      }
    }
  }

  ctx.restore();
}

// Handle click on canvas
canvas.addEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) / scale;
  const y = (e.clientY - rect.top) / scale;
  const col = Math.floor(x / cellSize);
  const row = Math.floor(y / cellSize);

  if (gridData[row][col] === null) {
    gridData[row][col] = Math.floor(Math.random() * 100);
  } else {
    gridData[row][col] = null;
  }
  drawGrid();
});

// Zoom functions
function zoomIn() {
  scale += 0.1;
  drawGrid();
}
function zoomOut() {
  scale = Math.max(0.1, scale - 0.1);
  drawGrid();
}

// Download grid as image
function downloadGrid() {
  const tempCanvas = document.createElement('canvas');
  tempCanvas.width = cols * cellSize;
  tempCanvas.height = rows * cellSize;
  const tempCtx = tempCanvas.getContext('2d');

  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const x = c * cellSize;
      const y = r * cellSize;
      tempCtx.fillStyle = '#fff';
      tempCtx.fillRect(x, y, cellSize, cellSize);
      tempCtx.strokeStyle = '#ccc';
      tempCtx.strokeRect(x, y, cellSize, cellSize);

      if (gridData[r][c] !== null) {
        tempCtx.fillStyle = '#000';
        tempCtx.font = `${cellSize - 2}px Arial`;
        tempCtx.textAlign = 'center';
        tempCtx.textBaseline = 'middle';
        tempCtx.fillText(gridData[r][c], x + cellSize / 2, y + cellSize / 2);
      }
    }
  }

  const link = document.createElement('a');
  link.download = 'number_grid.png';
  link.href = tempCanvas.toDataURL();
  link.click();
}

// Initial draw
drawGrid();
</script>

</body>
</html>